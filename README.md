# 试卷图像处理工具

一个基于 React + TypeScript 的试卷图像处理应用，专门用于处理拍照模糊的试卷图片，提供裁切、字迹增强、梯形校正、图像延展等功能。

## 功能特性
![image](https://github.com/user-attachments/assets/5fc45eef-77d4-4ee8-8613-171a4bd4e95d)

### 1. 图片上传
- 支持多种上传方式：
  - 点击选择文件
  - 拖拽上传
  - 粘贴截图（Ctrl+V）
- 支持常见图片格式：JPG、PNG、WEBP 等
![image](https://github.com/user-attachments/assets/05908c80-c79b-4f8c-b8e5-ff7db09ce8f6)

### 2. 图片裁切
- 使用 Cropper.js 实现精确裁切
- 可自由调整裁切区域
- 实时预览裁切效果
![image](https://github.com/user-attachments/assets/39b7bf11-517b-428d-b53c-9abcb5266e67)

### 3. 梯形校正
- 针对拍照角度倾斜的试卷进行透视矫正
- 可视化调整四个角点（按住并拖动控制点）
- 自动将倾斜的试卷转换为正矩形
- 支持触摸设备操作，移动端友好
![image](https://github.com/user-attachments/assets/6c7d6ce7-3e3c-4108-9c7b-6b4845e8bb8c)

### 4. 字迹增强
- **亮度调节**：调整图片整体亮度（0-200%）
- **对比度调节**：增强图片对比度（0-200%）
- **锐化处理**：使模糊的字迹更清晰（0-100%）
- **阈值处理**：二值化处理，专门增强字迹清晰度（0-100%）
- **清晰度增强**：使用USM锐化算法提高细节清晰度（0-100%）
- **饱和度调整**：控制图像色彩鲜艳程度（0-200%）
- **伽马校正**：调整暗部细节显示（0.5-1.5）
![image](https://github.com/user-attachments/assets/67a3276e-fa02-4da7-9488-f1fbec871685)

### 5. 图像延展
- 支持四个方向独立控制延展像素
- 智能匹配边缘颜色，平滑过渡
- 解决试卷边缘被裁剪过紧的问题

### 6. 快速预设
- **轻度增强**：适合轻微模糊的图片
- **字迹加深**：适合字迹较淡的图片
- **强力清晰**：适合严重模糊的图片
- **黑白文档**：将图片转换为高对比度黑白效果，适合纯文字文档

 原图
![微信图片_20250524114152](https://github.com/user-attachments/assets/e9e0a88b-e4e8-4183-b461-d57f809b2876)
处理后
![processed_exam_1748155133326](https://github.com/user-attachments/assets/6bba3143-a5eb-44fa-a5a0-a53053e8e195)

### 7. 图片下载
- 处理后的图片可直接下载
- 自动命名为 `processed_exam_时间戳.png`
- 保证高质量输出

## 技术栈

- **React 18**: 前端框架
- **TypeScript**: 类型安全
- **react-cropper**: 图片裁切功能
- **Canvas API**: 图像处理和滤镜效果
- **CSS3**: 现代化的UI设计

## 安装和运行

1. 安装依赖：
```bash
npm install
```

2. 启动开发服务器：
```bash
npm start
```

3. 在浏览器中访问 `http://localhost:3000`

## 使用说明

1. **上传图片**：通过点击上传区域、拖放或粘贴方式上传试卷照片
2. **裁切图片**：调整裁切框，去除多余部分，点击"应用裁切"确认
3. **梯形校正**：
   - 如果图片有透视变形，按住并拖动四个角点到试卷的四个角
   - 角点会自动吸附并高亮显示
   - 点击"应用校正"完成透视矫正
4. **图像延展**：
   - 如需给图片添加边距，调整四个方向的延展像素数值
   - 点击"应用延展"确认效果
5. **增强处理**：
   - 使用滤镜面板调整各项参数（亮度、对比度、锐化等）
   - 或使用快速预设一键应用常用效果组合
   - 调整效果实时预览
6. **保存下载**：点击右上角下载按钮，保存处理后的图片

## 最佳实践

- **裁切技巧**：先裁切去除无关区域，保留主要内容
- **梯形校正建议**：尽量将四个控制点精确定位在试卷四角
- **图像增强建议**：
  - 对于模糊试卷：先增加对比度，再适当锐化
  - 对于色彩过淡试卷：适当增加饱和度和对比度
  - 对于过暗试卷：调高亮度，降低伽马值
- **黑白效果**：纯文字试卷可尝试高阈值+高对比度组合
- **图像延展**：如果试卷边缘内容被裁切过紧，可使用延展功能增加边距

## 注意事项

- 建议上传尽可能清晰的原始照片
- 梯形校正时，确保四个角点准确对应试卷的四个角
- 字迹增强的阈值功能会将图片转为黑白，适合纯文字内容
- 处理大尺寸图片时可能需要一些时间，请耐心等待
- 移动设备上也可以完成所有操作，但建议使用较大屏幕以获得更精确控制

## 开发说明

项目结构：
```
src/
├── components/          # React组件
│   ├── ImageUploader.tsx     # 图片上传组件
│   ├── ImageEditor.tsx       # 图片编辑器主组件
│   ├── ImageFiltersPanel.tsx # 滤镜调整面板
│   └── PerspectiveCorrection.tsx # 梯形校正组件
├── types/              # TypeScript类型定义
├── App.tsx            # 主应用组件
└── index.tsx          # 应用入口
```

## License

MIT 
